# 文件的概念

#### 1. 文件的定义

文件是建立在外部设备上的数据结构，简单说，文件是用一个名字命名的存储在外部存储器上的一些数据

#### 2. 文件的分类

1. 普通文件与设备文件（用户的角度）

   普通文件指存储在磁盘或其他外部介质上的一个有序数据集（程序文件、数据文件）

   设备文件则是把与主机相连的设备看作一个文件来进行管理，把通过它们而进行的输入，输出等同于对磁盘的读和写。标准设备文件：标准输入文件、标准输出文件、标准错误文件

   C语言把文件看作无结构的字节流，与标准设备文件相联系的三个标准流：标准输入流、标准输出流、标准错误流，这三个流由系统自动建立，并自动分配文件缓冲区和文件指针，退出时自动关闭

   对字符的输入/输出：`getchar()  putchar()`

   对字符串的输入/输出：`gets()  puts()`

   格式化的输入/输出：`scanf()  printf()`

2. 文本（ASCII）文件与二进制（Binary）文件（文件编码方式）

   ASCII文件也称文本文件，这种文件在磁盘中存储时每个字符对应一个字节，用于存放对应的ASCII码，以字符为单位，文件由0或多个字符系列组成

   二进制文件是按照二进制编码方式来存放文件，与数据在内存中的存储形式（二进制码）组成的字节系列表示一致

   其中ASCII码以字符为单位比较直观，但占用空间比较大，二进制码以字节为单位，占用的存储空间小

   文本文件可以在终端屏幕上显示（或打印）二进制文件不能

3. 顺序读/写文件与随机读/写文件（读/写方式）

   顺序读/写文件是按从头到尾的顺序读出或写入，不能跳过文件前面的数据，随机读/写则相反

   通常对文本文件采用顺序读/写方法，二进制文件采用随机读/写方法

#### 3. 文件缓存区

文件操作时，不直接在程序数据区和外存介质间进行，而是通过文件缓存区进行

C语言中在进行输出时必须先把输出的数据送到文件缓存区，装满后再送入磁盘中；输入时，一次性从磁盘读一批数据到缓存区，然后逐个读到程序数据区

#### 4. 文件类型与文件指针

#### 5. 文件的操作过程

文件操作的一般过程：

建立/打开文件——读/写文件——关闭文件

打开文件就是将指定文件和程序联系起来，为读/写做好准备，打开一个文件时，如果文件不存在就建立它

关闭文件是将仍留在文件缓冲区的数据送给文件，然后取消程序与指定文件之间的联系，表示文件操作结束，释放文件存储区，使文件指针不再指向所联系的文件